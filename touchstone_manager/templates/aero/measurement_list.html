{% extends "base.html" %}

{% load i18n %}

{% block title %}
  {% trans "Measurements" %}
{% endblock title %}
{% block content %}
  <h1>{% trans "List of Measurements" %}</h1>
  {% if perms.aero.add_measurement %}
    <div class="py-3">
      <a class="btn btn-primary" href="{% url 'aero:measurement-create' %}">{% trans "Create New Measurement" %}</a>
    </div>
  {% endif %}
  {% if object_list %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">
              <a href="?ordering={% if request.GET.ordering == 'id' %}-{% endif %}id">#</a>
            </th>
            <th scope="col">
              <a href="?ordering={% if request.GET.ordering == 'aero_material__sample_number' %}-{% endif %}aero_material__sample_number">{% trans "Sample number" %}</a>
            </th>
            <th scope="col">
              <a href="?ordering={% if request.GET.ordering == 'aero_material__name' %}-{% endif %}aero_material__name">{% trans "Sample" %}</a>
            </th>
            <th scope="col">
              <a href="?ordering={% if request.GET.ordering == 'mean_s21' %}-{% endif %}mean_s21">{% trans "Mean S21" %}</a>
            </th>
            <th scope="col">
              <a href="?ordering={% if request.GET.ordering == 'measurement_date' %}-{% endif %}measurement_date">{% trans "Day of measurement" %}</a>
            </th>
            <th scope="col">{% trans "File" %}</th>
          </tr>
        </thead>
        <tbody>
          {% for obj in object_list %}
            <tr>
              <th>{{ obj.id }}</th>
              <th>{{ obj.aero_material.sample_number }}</th>
              <th>
                <a href="{{ obj.aero_material.get_absolute_url }}">{{ obj.aero_material.name }}</a>
              </th>
              <td>{{ obj.mean_s21|floatformat:2 }}</td>
              <td>{{ obj.measurement_date }}</td>
              {% if obj.measurement_file %}
                <td>
                  <svg xmlns="http://www.w3.org/2000/svg"
                       width="16"
                       height="16"
                       fill="currentColor"
                       class="bi bi-clipboard2-check"
                       viewBox="0 0 16 16">
                    <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z" />
                    <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z" />
                    <path d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z" />
                  </svg>
                </td>
              {% else %}
                <td>
                  <a class="btn btn-secondary"
                     href="{% url "aero:measurement-update" pk=obj.id %}">{% trans "Add" %}</a>
                </td>
              {% endif %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p>{% trans "No objects in list." %}</p>
  {% endif %}
{% endblock content %}
